# Improvements for the site

As I was going through finding and fixing bugs I came across what I deemed to be important improvements to make this site more of an MVP/usable site. These features aren't necessarily bugs but things that improved the user experience on the site.

### Projects page  

#### Improvement I would suggest:
The ability to donate over £999.99 I tried quickly changing `max_digits` to 6 from 5 in the model but this threw an error. 

#### How I implemented this:
Upon further thinking I decided not to implement this change as it could done on purpose but in reality it is more of a hindrance. I thought perhaps donations over a certain amount need to be handled differently, there are some unknown business points I would want to check before implementing this change. 

#### Improvement I would suggest: 
At present there is no way for an admin (or anyone) to add/edit or delete projects. I would add these options to the actions part of this table using the tag `is_superuser` so it only renders for admin accounts.

#### How I implemented edit: 
I used the users update form/  url/ view as a base and wired up to the edit button I added for admin only. Then using error messages as prompts I added the `get_context_data` function and the `success_url` functions. I was then having an issue where I was getting the title of the project from `context.get()` but not the description. So I used `get_object_or_404` to look at the project model and get the description from there. However I couldn’t tell what the id was as it was auto generated by Django. However by using `objects.get()` rather than `obejcts.filter()` I was then able to get the id which was the primary key needed for the `get_object_or_404`. So now I was getting the correct description for the correct project and it didn’t matter that they moved up and down the list as you edited them as the id was got in a dynamic way. 

#### How I implemented delete:
This was possibly the easiest of the new functions to implement. I did it by using the Django docs and the `DeleteView` class. 

#### How I implemented add: 
Use Django `CreateView` and follow the docs to point to the correct form and model. I used the error messages as prompts to ensure I was pointing at the correct forms etc. By this point in development I was becoming more comfortable with these Django views and what needed to bedefined so I was able to point this function to the `add_project_form.html` rather than `project_form.html` as it would by default (this form is used for the update function).

#### Problem:
Despite only rendering the edit, delete and add buttons if the logged in user is a super user, there was nothing stopping a normal user typing in the url to access these pages.

#### Exploration:
I am already using `RequiresLoginMixin` so is there something to assess if they are a super user.

#### Solution: 
Use `UserPassesTestMixin` and add a `test_func()` to assess if `self.request.user.is_superuser`. If the user passes this then the view works as expected, else it returns the 403 error and simply says you cannot access that page.


### Thank you page 
#### Improvement I would suggest:
There is no way back from the thank you page. Not a bug per se, just annoying from UX point of view. 

#### How I implemented the improvement:
First I checked there wasn’t any code that wasn’t rendering for whatever reason in `thanks.html`. After determining there wasn’t, I added an `<a>` tag styled as a button (using the same btn btn-primary classes used on the profile pages as well) to take you back to the project list page.

#### Further improvements that could be made here: 
Could turn the leaderboard into a fragment/include and show that on the thank you page as well so it is more engaging/interactive.


### Donor Wall

#### Improvements I would suggest:
If the pledgee name is someone's email ideally you would want to slice the name at the @ symbol so people's full email addresses aren't on the internet. 

#### How I implemented this improvement: 
There is no way in the Django template to slice from a character to the end as the if/for loops don't work as neatly as they do in the view/in Python. This meant that I couldn't find the index of the @ and use that to slice. I also looked into adding extra detail to the `ListView` but that didn't seem to be the solution. While this could potentially be done by changing it from a `ListView` to a `DetailView` to allow me to pass extra context through (this way I can use a for loop as normal to get the index). Without massively changing the provided view the easiest way to help provide some privacy around the email was to truncate a x number of characters so the full email is not seen. 

#### Other improvements that could be made:
The background of the tiles could be coloured depending on the size of donation, or the house the donation was assigned to, to help make this page more visually appealing. 

### Other

#### Improvement that could be made:
Add hubbub favicon from the Django one to make it look more on brand. 

#### How I implemented it:
Change the image stored at `static 'images/favicons/hubbub_favicon.ico'` where `base.html` looks for the favicon. 


[Back](README.md)